function messagebox(){this.title='';this.content='';this.action='';this.msg=''};function messageboxmover(){this.grabbed=false};messageboxmover.prototype.grab=function(elem,event){this.grabbed=elem;this.coord=[$(this.grabbed)[0].offsetLeft,$(this.grabbed)[0].offsetTop];this.grabcoord=[event.clientX,event.clientY]};messageboxmover.prototype.move=function(event){if(this.grabbed===false){return}if(typeof event.originalEvent.movementX==='undefined'){$(this.grabbed).css('left',this.coord[0]+(event.clientX-this.grabcoord[0])+'px');$(this.grabbed).css('top',this.coord[1]+(event.clientY-this.grabcoord[1])+'px');this.grabcoord=[event.clientX,event.clientY];this.coord=[$(this.grabbed)[0].offsetLeft,$(this.grabbed)[0].offsetTop]}else{$(this.grabbed).css('left',(this.coord[0]+event.originalEvent.movementX)+'px');$(this.grabbed).css('top',(this.coord[1]+event.originalEvent.movementY)+'px');this.coord=[$(this.grabbed)[0].offsetLeft,$(this.grabbed)[0].offsetTop]}};messageboxmover.prototype.ungrab=function(elem){this.grabbed=false};var mboxmover=[];messagebox.prototype.setmoveable=function(mboxelem){if(typeof $(mboxelem).children('.messageboxholder').attr('id')!=='undefined'){return}mboxmover[mboxmover.length]=new messageboxmover();$(mboxelem).children().eq(0).before('<div id="messageboxholder_'+(mboxmover.length-1)+'" class="messageboxholder" style="height:10px;width:100%;background:transparent;margin-top:-10px;"></div>');$(mboxelem).children('.messageboxtitle').on('mousedown',function(event){event.preventDefault();if(event.button){$(this).parent().css('top','');$(this).parent().css('left','');$(this).parent().css('transform','')}mboxmover[mboxmover.length-1].grab($(this).parent(),event)});$(mboxelem).children('.messageboxtitle').on('mousemove',function(event){mboxmover[mboxmover.length-1].move(event)});$(mboxelem).children('.messageboxtitle').on('mouseout',function(event){mboxmover[mboxmover.length-1].ungrab($(this).parent())});$(mboxelem).children('.messageboxtitle').on('mouseup',function(event){mboxmover[mboxmover.length-1].ungrab($(this).parent())});$('#messageboxholder_'+(mboxmover.length-1)).on('mousedown',function(event){event.stopPropagation();event.preventDefault();if(event.button){$(this).parent().css('top','');$(this).parent().css('left','');$(this).parent().css('transform','')}mboxmover[mboxmover.length-1].grab($(this).parent(),event)});$('#messageboxholder_'+(mboxmover.length-1)).on('mousemove',function(event){mboxmover[mboxmover.length-1].move(event)});$('#messageboxholder_'+(mboxmover.length-1)).on('mouseout',function(event){mboxmover[mboxmover.length-1].ungrab($(this).parent())});$('#messageboxholder_'+(mboxmover.length-1)).on('mouseup',function(event){mboxmover[mboxmover.length-1].ungrab($(this).parent())})};messagebox.prototype.updatemessage=function(content){this.content=content;$('#messageboxcontent').find('.tablecell').html(this.content);$('#messageboxmsg').html(this.msg).removeClass('error active')};messagebox.prototype.updatetitle=function(title){this.title=title;$('#messageboxtitle').html(this.title)};messagebox.prototype.displayfunc=function(title,content,action){this.title=title;this.content=content;this.action=action;this.action='<span id="closemessagebox"><span id="thexsign">X</span>Close</span>'+this.action;$('#messageboxtitle').html(this.title);$('#messageboxcontent').find('.tablecell').html(this.content);$('#messageboxaction').html(this.action);$('#messageboxmsg').html(this.msg).removeClass('error active');$('#messagebox').addClass('active');$('.pagecontainer').css('opacity','0.3');$('#sidebar').css('opacity','0.3');$('#closemessagebox').on('click',function(){var mboxclass=$('#messagebox').attr('class').split(' ');for(var i=0;i<mboxclass.length;i++){if(mboxclass[i]=='loading'){continue}$('#messagebox').removeClass(mboxclass[i])}$('#sidebar').css('opacity','1');$('.pagecontainer').css('opacity','1')})};messagebox.prototype.dispmsg=function(themsg,fadeout){this.msg=themsg;$('#messageboxmsg').html(themsg).addClass('active').removeClass('error').css('opacity',1);if(fadeout){clearTimeout(this.timer);this.timer=setTimeout(function(){$('#messageboxmsg').animate({'opacity':0},'slow',function(){$('#messageboxmsg').removeClass('active')})},4000)}};messagebox.prototype.errormsg=function(themsg,fadeout){this.msg=themsg;$('#messageboxmsg').html(themsg).addClass('active error').css('opacity',1);if(fadeout){clearTimeout(this.timer);this.timer=setTimeout(function(){$('#messageboxmsg').animate({'opacity':0},'slow',function(){$('#messageboxmsg').removeClass('active')})},4000)}};messagebox.prototype.display=function(){this.action='<span id="closemessagebox"><span id="thexsign">X</span>Close</span>'+this.action;$('#messageboxtitle').html(this.title);$('#messageboxcontent').find('.tablecell').html(this.content);$('#messageboxaction').html(this.action);$('#messageboxmsg').html(this.msg).removeClass('error active');$('#messagebox').addClass('active');$('#closemessagebox').on('click',function(){var mboxclass=$('#messagebox').attr('class').split(' ');for(var i=0;i<mboxclass.length;i++){if(mboxclass[i]=='loading'){continue}$('#messagebox').removeClass(mboxclass[i])}$('.pagecontainer').css('opacity','1');$('#sidebar').css('opacity','1')});$('#sidebar').css('opacity','0.3');$('.pagecontainer').css('opacity','0.3')};messagebox.prototype.close=function(){var mboxclass=$('#messagebox').attr('class').split(' ');for(var i=0;i<mboxclass.length;i++){if(mboxclass[i]=='loading'){continue}$('#messagebox').removeClass(mboxclass[i])}$('.pagecontainer').css('opacity','1');$('#sidebar').css('opacity','1')};